"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[99749],{674981:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(173436),i=n(832691),o=n(824756),l=n(461061);function u(t,e,n,r,i,o,l){try{var u=t[o](l),s=u.value}catch(t){n(t);return}u.done?e(s):Promise.resolve(s).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function l(t){u(o,r,i,l,s,"next",t)}function s(t){u(o,r,i,l,s,"throw",t)}l(void 0)}))}}var a=function(t,e){var n,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){
case 0:case 1:i=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(t,l)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=new i.Z("CloudSync"),f=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.message=e};function h(t,e){return d.apply(this,arguments)}function d(){d=s((function(t,e){var n,i,u,s=arguments;return a(this,(function(a){switch(a.label){case 0:n=s.length>2&&void 0!==s[2]?s[2]:null;r.Z.dispatch({type:"GAME_CLOUD_SYNC_START",applicationId:t,branchId:e});a.label=1;case 1:
a.trys.push([1,3,,4]);return[4,o.j(t,e,n)];case 2:if((i=a.sent()).type===l.QCD.CONFLICT){r.Z.dispatch({type:"GAME_CLOUD_SYNC_CONFLICT",applicationId:t,branchId:e,next:i.next,remote:i.remote});throw new f("Conflict in cloud sync.")}i.type!==l.QCD.PULL&&i.type!==l.QCD.PUSH||c.info("Sync complete",i);return[3,4];case 3:if((u=a.sent())instanceof f)throw u;r.Z.dispatch({type:"GAME_CLOUD_SYNC_ERROR",applicationId:t,branchId:e});c.error("Failed to cloud sync:",u);throw new Error("Failed to cloud sync.");case 4:r.Z.dispatch({type:"GAME_CLOUD_SYNC_COMPLETE",applicationId:t,branchId:e});return[2,i]}}))}));return d.apply(this,arguments)}},8062:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(173436);const i={updateChannelDimensions:function(t,e,n,i,o){r.Z.wait((function(){r.Z.dispatch({type:"UPDATE_CHANNEL_DIMENSIONS",channelId:t,scrollTop:e,scrollHeight:n,offsetHeight:i});null!=o&&o()}))},updateChannelListScroll:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.Z.dispatch({
type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTop:e,channelIds:n})},channelListScrollTo:function(t,e){r.Z.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTo:e,channelIds:[]})},clearChannelListScrollTo:function(t){r.Z.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTo:null,channelIds:[]})},clearChannelDimensions:function(t,e){this.updateChannelDimensions(t,null,null,null,e)},updateGuildListScrollTo:function(t){r.Z.dispatch({type:"UPDATE_GUILD_LIST_DIMENSIONS",scrollTop:t})}}},836042:(t,e,n)=>{n.d(e,{$:()=>o});var r=n(112886),i=n(212033),o={binds:["mod+k","mod+t"],comboKeysBindGlobal:!0,action:function(){i.Z.hasLayers()||(0,r.$Z)();return!1}}},171826:(t,e,n)=>{n.d(e,{_:()=>l});var r=n(173436);var i=n(897576),o=n(62230),l={binds:["mod+/","mod+shift+/"],comboKeysBindGlobal:!0,action:function(){(0,i.nf)(o.J)?r.Z.dispatch({type:"HIDE_KEYBOARD_SHORTCUTS"}):r.Z.dispatch({type:"SHOW_KEYBOARD_SHORTCUTS"});return!1}}},404168:(t,e,n)=>{n.d(e,{xQ:()=>R.xQ,
h8:()=>R.h8,a8:()=>R.a8,o6:()=>x,ZP:()=>j,gJ:()=>M});var r=n(496486),i=n.n(r),o=n(120053),l=n.n(o),u=n(53551),s=n(989232),a=n(490640);function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return c(t)}function f(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t,e){h=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return h(t,e)}var d=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&h(t,e)}(n,t);var e=p(n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=e.call(this)).id=t.id;r.path=t.path;return r}n.fromPath=function(t){return new n({id:t,path:t})};return n}(a.Z);var _=n(356004),v=n(488076),C=n(1812),g=n(105405),E=n(859023),b=n(774581),m=n(462020),S=n(86124),O=n(961033),I=n(839146),R=n(560891),T=n(461061);function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e,n){e in t?Object.defineProperty(t,e,{value:n,
enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){L(t,e,n[e])}))}return t}function w(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=Object.freeze({});function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return 1e3*t*(null!=e?e:1)}function U(t,e){if(!e.frecencyBoosters)return{};var n=v.Z.getFrequently(),r=n.reduce((function(t,e){var n=e.id,r=v.Z.getScore(n);return r>t?r:t}),0),i=[];switch(t){case R.h8.GUILD:i=n.filter((function(t){return t instanceof s.Z}));break;case R.h8.USER:i=n.filter((function(t){return t instanceof u.Sf&&t.type===T.d4z.DM}));break;case R.h8.GROUP_DM:i=n.filter((function(t){return t instanceof u.Sf&&t.isMultiUserDM()}));break;case R.h8.TEXT_CHANNEL:i=n.filter((function(t){return t instanceof u.Sf&&(0,u.r8)(t.type)}));break;case R.h8.VOICE_CHANNEL:i=n.filter((function(t){return t instanceof u.Sf&&t.isGuildVocal()}))}var o={},l=!0,a=!1,c=void 0;try{
for(var f,h=i[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value,p=d.id,y=v.Z.getScore(p);if(t===R.h8.USER&&d instanceof u.mn){if(d.type===T.d4z.DM)o[p=d.getRecipientId()]=1+y/r;else if(d.type===T.d4z.GROUP_DM){var C=d.recipients.length,E=!0,b=!1,m=void 0;try{for(var S,O=d.recipients[Symbol.iterator]();!(E=(S=O.next()).done);E=!0){o[S.value]=1+y/r*(1/C)}}catch(t){b=!0;m=t}finally{try{E||null==O.return||O.return()}finally{if(b)throw m}}}}else o[p]=1+y/r}}catch(t){a=!0;c=t}finally{try{l||null==h.return||h.return()}finally{if(a)throw c}}var I=g.Z.getFriendIDs(),N=!0,A=!1,L=void 0;try{for(var Z,w=I[Symbol.iterator]();!(N=(Z=w.next()).done);N=!0){var P,D=Z.value;o[D]=(null!==(P=o[D])&&void 0!==P?P:1)+.2}}catch(t){A=!0;L=t}finally{try{N||null==w.return||w.return()}finally{if(A)throw L}}var U=_.Z.getDMUserIds(),x=!0,M=!1,j=void 0;try{for(var H,k=U[Symbol.iterator]();!(x=(H=k.next()).done);x=!0){var G,q=H.value;o[q]=(null!==(G=o[q])&&void 0!==G?G:1)+.1}}catch(t){M=!0;j=t}finally{
try{x||null==k.return||k.return()}finally{if(M)throw j}}return o}function x(t){return{type:R.h8.HEADER,record:new R.X5(t),score:0}}function M(t,e,n,r){var i=n.length,o=r,l=e;if(0===i)return 0;if(null==o)o=l;else if(o===l)return l;return(l+=t===R.a8.UP?-1:1)<0||l>=i?M(t,l<0?i:-1,n,o):n[l].type===R.h8.HEADER?M(t,l,n,o):l}const j=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,l=this;A(this,t);this.query="";this.options=P;this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[];this._userBlacklist=null;this.parseUserResults=function(t){var e=t.results;if(l._include(R.h8.USER)){l._userResults=[];var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value,a=s.user,c=s.id,f=s.score,h=s.comparator
;null==a&&(a=E.default.getUser(c));null!=a&&l._userResults.push({type:R.h8.USER,record:a,score:D(f),comparator:null!=h?h:void 0})}}catch(t){r=!0;i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}l._userResults.length>l._limit&&(l._userResults.length=l._limit);l.updateAllResults()}};this.updateAllResults=function(){clearTimeout(l._asyncTimeout);l.results=i()(w(l._userResults).concat(w(l._groupDMResults),w(l._textChannelResults),w(l._voiceChannelResults),w(l._guildResults),w(l._linkResults))).uniqBy((function(t){return"".concat(t.type,"-").concat(t.record.id)})).sort(I.Z).value();l.onResultsChange(l.results,l.query)};this.onResultsChange=e;this.setOptions(o,!0);this._limit=r;this.createSearchContext();this.setResultTypes(n)}var e=t.prototype;e.createSearchContext=function(){null==this.userSearchContext&&(this.userSearchContext=O.Z.getSearchContext(this.parseUserResults,this._limit))};e.setLimit=function(t){var e=this.userSearchContext;this._limit=t
;null!=e&&e.setLimit(t);this._userResults.length>this._limit&&(this._userResults.length=this._limit);this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit);this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit);this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit);this._guildResults.length>this._limit&&(this._guildResults.length=this._limit);this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit);this._linkResults.length>this._limit&&(this._linkResults.length=this._limit)};e.setResultTypes=function(t){this.resultTypes=null!=t?new Set(t):null;this._userResults=this._include(R.h8.USER)?this._userResults:[];this._groupDMResults=this._include(R.h8.GROUP_DM)?this._groupDMResults:[];this._textChannelResults=this._include(R.h8.TEXT_CHANNEL)?this._textChannelResults:[];this._voiceChannelResults=this._include(R.h8.VOICE_CHANNEL)?this._voiceChannelResults:[]
;this._guildResults=this._include(R.h8.GUILD)?this._guildResults:[];this._applicationResults=this._include(R.h8.APPLICATION)?this._applicationResults:[];this._linkResults=this._include(R.h8.LINK)?this._linkResults:[]};e._include=function(t){return null==this.resultTypes||this.resultTypes.has(t)};e._isAsyncSearch=function(){return this._include(R.h8.USER)};e.setOptions=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options=e?Z({},this.options,t):t;null!=this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map((function(t){return t.startsWith("user:")?t.replace("user:",""):""})).filter((function(t){return""!==t})):this._userBlacklist=null};e.search=function(t,e){this.query=t;if(""!==t.trim()){this.queryUsers(t,e,this._limit);this._groupDMResults=this.queryGroupDMs(t,this._limit);this._textChannelResults=this.queryTextChannels(t,this._limit);this._voiceChannelResults=this.queryVoiceChannels(t,this._limit)
;this._guildResults=this.queryGuilds(t,this._limit);this._applicationResults=this.queryApplications(t,this._limit);this._linkResults=this.queryLink(t,this._limit);if(this._isAsyncSearch()){clearTimeout(this._asyncTimeout);this._asyncTimeout=setTimeout(this.updateAllResults,300)}else this.updateAllResults()}else{this.clear();this.updateAllResults()}};e.clear=function(){var t=this.userSearchContext;null!=t&&t.clearQuery();this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[]};e.clean=function(){this.clear();this.destroy();this.query="";this.updateAllResults()};e.destroy=function(){var t=this.userSearchContext;if(null!=t){t.destroy();this.userSearchContext=null}};e.queryTextChannels=function(t,e){if(!this._include(R.h8.TEXT_CHANNEL))return[];var n=U(R.h8.TEXT_CHANNEL,this.options),r=this.options.blacklist,i=null!=r?function(t){
return!r.has("channel:".concat(t.id))}:void 0;return b.ZP.queryChannels({query:t,guildId:null,limit:e,fuzzy:!0,filter:i,boosters:n})};e.queryVoiceChannels=function(t,e){if(!this._include(R.h8.VOICE_CHANNEL))return[];var n=this.options.voiceChannelGuildFilter;if(void 0===n)return[];var r=U(R.h8.VOICE_CHANNEL,this.options);return b.ZP.queryChannels({query:t,guildId:n,limit:e,fuzzy:!0,type:C.Zb,boosters:r})};e.queryGuilds=function(t,e){if(!this._include(R.h8.GUILD))return[];var n=U(R.h8.GUILD,this.options),r=this.options.blacklist,i=null!=r?function(t){return!r.has("guild:".concat(t.id))}:void 0;return b.ZP.queryGuilds({query:t,limit:e,fuzzy:!0,filter:i,boosters:n})};e.queryUsers=function(t,e,n){var r=this.userSearchContext;if(null!=r&&this._include(R.h8.USER)){var i=this.options.userFilters;void 0!==e&&m.Z.requestMembers(e,t,100);r.setLimit(n);r.setQuery(t,i,this._userBlacklist,U(R.h8.USER,this.options))}};e.queryGroupDMs=function(t,e){if(!this._include(R.h8.GROUP_DM))return[]
;var n=this.options.blacklist,r=U(R.h8.GROUP_DM,this.options),i=null!=n?function(t){return!n.has("channel:".concat(t.id))}:void 0;return b.ZP.queryGroupDMs({query:t,limit:e,fuzzy:!0,filter:i,boosters:r})};e.queryApplications=function(t,e){return this._include(R.h8.APPLICATION)?b.ZP.queryApplications({query:t,limit:e,fuzzy:!0}):[]};e.queryLink=function(t,e){if(!this._include(R.h8.LINK))return[];var n,r=l().sanitizeUrl(t);try{n=new URL(r)}catch(t){return[]}var i=n.pathname,o=n.hostname,u=void 0===o?"":o,s=n.host,a=S.Z.isDiscordHostname(u)||window.location.host===s;return null!==i&&a&&S.Z.isAppRoute(i)?[{type:R.h8.LINK,record:y.fromPath(i),score:1}]:[]};return t}()},848828:(t,e,n)=>{n.d(e,{c:()=>p,Z:()=>y});var r=n(785893),i=(n(667294),n(294184)),o=n.n(i),l=n(78979),u=n(661505),s=n.n(u),a="up",c="right",f="down",h="left",d=function(t){var e=t.direction,n=void 0===e?a:e;return(0,r.jsx)("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:o()(s().bindArrow,s()[n]),
children:(0,r.jsx)("g",{fill:"#FFFFFF",children:(0,r.jsx)("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})})})},p={mod:function(){return l.Z.modKey},alt:function(){return l.Z.altKey},up:function(){return(0,r.jsx)(d,{direction:a})},down:function(){return(0,r.jsx)(d,{direction:f})},left:function(){return(0,r.jsx)(d,{direction:h})},right:function(){return(0,r.jsx)(d,{direction:c})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},plus:function(){return"+"},return:function(){return l.Z.returnKey}};const y=function(t){var e=t.shortcut,n=t.className,i=t.keyClassName,l=Array.isArray(e)?e:e.split("+");return(0,r.jsx)("div",{className:o()(s().keybindShortcut,n),children:l.map((function(t){return null!=p[t]?p[t]():t})).map((function(t,e){
return(0,r.jsx)("span",{className:o()(s().key,i),children:t},e)}))})}},62230:(t,e,n)=>{n.d(e,{J:()=>r});var r="KEYBOARD_SHORTCUT_MODAL_KEY"},112886:(t,e,n)=>{n.d(e,{$Z:()=>D,Cp:()=>U,yC:()=>x,tF:()=>M,Se:()=>j});var r=n(173436),i=n(642400),o=n(8062),l=n(804626),u=n(404168),s=n(416533),a=n(672549),c=n(510174),f=n(53551),h=n(356004),d=n(800539),p=n(379822),y=n(971738),_=n(932847),v=n(532497),C=n(215390),g=n(461061),E=n(35236);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){m(t,e,n[e])}))}return t}function O(t,e){
return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],l=!0,u=!1;try{for(n=n.call(t);!(l=(r=n.next()).done);l=!0){o.push(r.value);if(e&&o.length===e)break}}catch(t){u=!0;i=t}finally{try{l||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I,R=function(){return Promise.resolve()},T=n(905435);R=T.playApplication;var N=Object.freeze((m(I={},u.xQ.USER,u.h8.USER),
m(I,u.xQ.TEXT_CHANNEL,u.h8.TEXT_CHANNEL),m(I,u.xQ.VOICE_CHANNEL,u.h8.VOICE_CHANNEL),m(I,u.xQ.GUILD,u.h8.GUILD),m(I,u.xQ.APPLICATION,u.h8.APPLICATION),I)),A=new RegExp("^".concat(u.xQ.USER,"|").concat(u.xQ.TEXT_CHANNEL,"|").concat(u.xQ.VOICE_CHANNEL,"|\\").concat(u.xQ.GUILD,"|\\").concat(u.xQ.APPLICATION));function L(t){var e=O(function(t){var e,n=t.charAt(0),r=null!==(e=N[n])&&void 0!==e?e:null;return[t.replace(A,""),r]}(t),2);return{query:e[0],queryMode:e[1]}}function Z(t){if(!C.Z.isOpen()){var e,n=y.Z.getGuildId(),r=p.Z.getChannelId(n);if(null!=r){var i=h.Z.getChannel(r);e=null!=i?i.type:null}_.default.track(g.rMx.QUICKSWITCHER_OPENED,{source:t,current_guild_id:n,current_channel_id:r,current_channel_type:e})}}function w(t,e){var n=C.Z.getProps(),r=n.results,i=n.queryMode,o=n.query,l=n.maxQueryLength,s=y.Z.getGuildId(),a=p.Z.getChannelId(s),c=r[(0,u.gJ)(u.a8.DOWN,-1,r)],d=v.Z.isEmail(o),g=v.Z.isPhoneNumber(o),b=v.Z.isUserTagLike(o),m=null!=a&&(0,E.AB)(a),S={
current_channel_id:m?void 0:a,current_channel_static_route:m?a:void 0,current_guild_id:s,query_mode:null!=i?i:"GENERAL",query_length:o.length,max_query_length:l,is_email_like:d,is_phone_like:g,is_username_like:b,query:d||g||b?null:o,top_result_type:null!=c?c.type:null,top_result_score:null!=c?c.score:null,num_results_total:C.Z.getResultTotals(),num_results_users:C.Z.getResultTotals(u.h8.USER),num_results_text_channels:C.Z.getResultTotals(u.h8.TEXT_CHANNEL),num_results_voice_channels:C.Z.getResultTotals(u.h8.VOICE_CHANNEL),num_results_guilds:C.Z.getResultTotals(u.h8.GUILD),num_results_group_dms:C.Z.getResultTotals(u.h8.GROUP_DM)};if(null!=a){var O=h.Z.getChannel(a);S.current_channel_type=null!=O?O.type:null}if(null!=e){var I=e.type,R=e.score,T=e.record;S.selected_type=I;S.selected_score=R;S.selected_index=r.indexOf(e);switch(I){case u.h8.GUILD:S.selected_guild_id=T.id;break;case u.h8.TEXT_CHANNEL:case u.h8.VOICE_CHANNEL:
T instanceof f.Sf&&(S.selected_guild_id=null!=T.guild_id?T.guild_id:null);S.selected_channel_id=T.id;break;case u.h8.GROUP_DM:S.selected_channel_id=T.id;break;case u.h8.USER:S.selected_user_id=T.id}}_.default.track(t,S)}function P(){r.Z.dispatch({type:"QUICKSWITCHER_HIDE"})}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"KEYBIND",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Z(t);r.Z.dispatch(S({type:"QUICKSWITCHER_SHOW"},L(e)))}function U(){w(g.rMx.QUICKSWITCHER_CLOSED);P()}function x(t){r.Z.dispatch(S({type:"QUICKSWITCHER_SEARCH"},L(t)))}function M(t){r.Z.dispatch({type:"QUICKSWITCHER_SELECT",selectedIndex:t})}function j(t){P();w(g.rMx.QUICKSWITCHER_RESULT_SELECTED,t);var e,n=t.type,f=t.record,p={page:g.ZY5.QUICK_SWITCHER};switch(n){case u.h8.GUILD:(0,c.X)(f.id);break;case u.h8.TEXT_CHANNEL:null!=(e=h.Z.getChannel(f.id))&&(0,a.Kh)(e.id,{state:{analyticsSource:p}});break;case u.h8.VOICE_CHANNEL:
null!=(e=h.Z.getChannel(f.id))&&l.default.selectVoiceChannel(f.id);break;case u.h8.USER:i.Z.openPrivateChannel([f.id]);o.Z.channelListScrollTo(g.ME,f.id);break;case u.h8.GROUP_DM:(0,a.Kh)(f.id);o.Z.channelListScrollTo(g.ME,f.id);break;case u.h8.APPLICATION:var y=d.Z.getActiveLibraryApplication(f.id);R(f.id,y,{analyticsParams:{source:g.Sbl.QUICK_SWITCHER,location:g.Sbl.QUICK_SWITCHER}});break;case u.h8.LINK:(0,s.Z)(f.path)}r.Z.dispatch({type:"QUICKSWITCHER_SWITCH_TO",result:t})}},215390:(t,e,n)=>{n.d(e,{Z:()=>it});var r=n(496486),i=n.n(r),o=n(791462),l=n(444450),u=n(173436),s=n(404168),a=n(53211),c=n(356004),f=n(105405),h=n(859023),d=n(560891),p=n(461061);var y=n(577028),_=n(80635),v=n(631134),C=n(402124),g=n(1812),E=n(212218),b=n(653772),m=n(940712),S=n(283369),O=n(379822),I=n(971738),R=n(390504),T=n(774581),N=n(90816),A=n(959797);function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t){w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return w(t)}function P(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t,e){D=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return D(t,e)}function U(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}var j,H="seenQSTutorial",k=0,G=!1,q=!1,F=null,Q=[],K=null,B=0,z=[],W=[];function Y(){q=b.Z.getGuildCount()>=3||i().size(c.Z.getMutablePrivateChannels())>=20;z=[]}function V(t){var e=function(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.Z,i=e.getChannel(t);if(null==i)return null;var o=(0,a.F6)(i,n,r);switch(i.type){case p.d4z.DM:var l=n.getUser(i.getRecipientId());return null==l?null:{type:d.h8.USER,record:l,score:0,comparator:o};case p.d4z.GROUP_DM:return{type:d.h8.GROUP_DM,record:i,score:0,comparator:o};default:return{type:d.h8.TEXT_CHANNEL,record:i,score:0,comparator:o}}}(t);return null==e||null!=F&&F!==e.type?null:e}function X(){var t,e,n=null!==(t=I.Z.getGuildId())&&void 0!==t?t:void 0,r=null!==(e=O.Z.getChannelId())&&void 0!==e?e:void 0;switch(F){case s.h8.USER:var o=v.default.getId();return T.ZP.getRecentlyTalked(r,100).filter((function(t){return t.record.id!==o}));case s.h8.APPLICATION:return T.ZP.queryApplications({query:"",limit:100,fuzzy:!0});case s.h8.GUILD:return T.ZP.queryGuilds({query:"",limit:100,fuzzy:!0})
;case s.h8.TEXT_CHANNEL:return T.ZP.queryChannels({query:"",guildId:I.Z.getGuildId(),limit:100,fuzzy:!0});case s.h8.VOICE_CHANNEL:return T.ZP.queryChannels({query:"",guildId:I.Z.getGuildId(),limit:100,fuzzy:!0,filter:function(){return!0},type:g.Zb})}for(var l=[],u=[],a=1;a<W.length;a+=1){var f=V(W[a]);null!=f&&((f.type!==s.h8.TEXT_CHANNEL&&f.type!==s.h8.VOICE_CHANNEL||m.Z.can(p.Plq.VIEW_CHANNEL,f.record))&&u.push(f))}if(u.length>0){var h;(h=l).push.apply(h,[(0,s.o6)(A.Z.Messages.QUICKSWITCHER_LAST_CHANNEL)].concat(U(u)))}var d=function(t){var e=[];C.Z.getRecentlyEditedDrafts(C.d.ChannelMessage).forEach((function(n){var r=n.channelId;if(!t(r)){var i=V(r);null!=i&&e.push(i)}}));return e}((function(t){return t===r||W.includes(t)}));if(d.length>0){var _;(_=l).push.apply(_,[(0,s.o6)(A.Z.Messages.QUICKSWITCHER_DRAFTS)].concat(U(d)))}var E=i()(c.Z.loadAllGuildAndPrivateChannelsFromDisk()).values().concat(y.Z.computeAllActiveJoinedThreads()).filter((function(t){var e=t.id
;return e!==r&&!W.includes(e)&&S.ZP.getMentionCount(e)>0})).map((function(t){return V(t.id)})).filter(N.lm).value();if(E.length>0){l.push((0,s.o6)(A.Z.Messages.QUICKSWITCHER_MENTIONS));l=l.concat(E)}if(null!=n){var b=g.ZP.getSelectableChannelIds(n).filter((function(t){var e=c.Z.getChannel(t);return!(null==e||t===r||W.includes(t)||R.Z.isChannelMuted(e.guild_id,t)||null!=e.parent_id&&R.Z.isChannelMuted(e.guild_id,e.parent_id))&&S.ZP.hasRelevantUnread(e)})).map((function(t){return V(t)})).filter((function(t){return t}));Object.values(y.Z.getActiveJoinedUnreadThreadsForGuild(n)).forEach((function(t){for(var e in t){var n=V(e);null!=n&&b.push(n)}}));if(b.length>0){l.push((0,s.o6)(A.Z.Messages.QUICKSWITCHER_UNREAD_CHANNELS));l=l.concat(b)}}return i()(l).uniqBy((function(t){return t.record.id})).value()}function J(t,e){switch(F){case s.h8.USER:var n=b.Z.getGuild(I.Z.getGuildId());t.unshift((0,s.o6)(null!=n?A.Z.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:n.name
}):A.Z.Messages.QUICKSWITCHER_QUERYMODE_USERS));Q=t;break;case s.h8.TEXT_CHANNEL:t.unshift((0,s.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS));Q=t;break;case s.h8.VOICE_CHANNEL:t.unshift((0,s.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS));Q=t;break;case s.h8.GUILD:t.unshift((0,s.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_GUILDS));Q=t;break;case s.h8.APPLICATION:t.unshift((0,s.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS));Q=t;break;default:Q=t}if(e!==K){K=e;B=Math.max(e.length,B);k=(0,s.gJ)(s.a8.DOWN,-1,Q)}else{var r=Q[k];null!=r&&r.type===s.h8.HEADER&&(k=(0,s.gJ)(s.a8.DOWN,k,Q))}rt.emitChange()}function $(t){var e,n=t.query,r=t.queryMode,i=null!==(e=I.Z.getGuildId())&&void 0!==e?e:void 0,o=new Set(["user:".concat(v.default.getId())]);null!=i&&o.add("guild:".concat(i));j=null!=j?j:new s.ZP(tt,null,null!=r?100:5,{frecencyBoosters:!0,blacklist:o});K=null;B=n.length;F=r;j.search(n)}function tt(t,e){if(!function(t,e){if(t.length!==e.length)return!1
;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.record.id!==i.record.id)return!1}return!0}(t=""===(e=e.trim()).trim()?X():t,z)){z=t;J(t,e)}}function et(){K=null;B=0;z=[];if(null!=j){j.destroy();j=null}}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&D(t,e)}(n,t);var e=M(n);function n(){Z(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(t){this.waitFor(E.ZP,b.Z,c.Z);this.syncWith([_.Z],(function(){return!0}));G=l.Z.get(H)||!1;var e;W=null!==(e=null==t?void 0:t.channelHistory)&&void 0!==e?e:[]};r.getState=function(){return{channelHistory:W}};r.isOpen=function(){return null!=j};r.getResultTotals=function(t){return null==j?0:null==t?j.results.reduce((function(t,e){return e.type!==s.h8.HEADER?t+1:t}),0):j.results.reduce((function(e,n){return n.type===t?e+1:e}),0)}
;r.channelNoticePredicate=function(t,e){var n=Date.now()-e>=p.Hqc;return q&&n};r.getFrequentGuilds=function(){return null!=j?j.queryGuilds("",100):null};r.getFrequentGuildsLength=function(){return null!=j?j.queryGuilds("",100).length:0};r.getChannelHistory=function(){return W};r.getProps=function(){return{theme:_.Z.theme,query:null!=j?j.query:"",queryMode:F,results:Q,selectedIndex:k,seenTutorial:G,maxQueryLength:B}};r.__getLocalVars=function(){return{SEEN_TUTORIAL_KEY:H,MAX_GENERAL_RESULTS:5,MAX_QUERY_MODE_RESULTS:100,autocompleter:j,selectedIndex:k,seenTutorial:G,isUseful:q,queryMode:F,results:Q,lastQuery:K,maxQueryLength:B,cachedUserSearchResults:z,channelHistory:W,instance:rt}};return n}(o.ZP.PersistedStore);nt.displayName="QuickSwitcherStore";nt.persistKey="QuickSwitcherStore";var rt=new nt(u.Z,{CONNECTION_OPEN:Y,CONNECTION_OPEN_SUPPLEMENTAL:Y,QUICKSWITCHER_SHOW:$,SHOW_ACTION_SHEET_QUICK_SWITCHER:$,QUICKSWITCHER_HIDE:et,OVERLAY_SET_INPUT_LOCKED:et,
HIDE_ACTION_SHEET_QUICK_SWITCHER:et,QUICKSWITCHER_SEARCH:function(t){var e,n=t.query,r=t.queryMode;if(null==j)return!1;var i=null!==(e=I.Z.getGuildId())&&void 0!==e?e:null;if(F!==r){j.setResultTypes(null!=r?[r]:null);j.setLimit(null!=r?100:5);var o,l=null!==(o=I.Z.getGuildId())&&void 0!==o?o:void 0;r===s.h8.USER&&null!=l?j.setOptions({userFilters:{guild:l,friends:!0}},!0):r===s.h8.VOICE_CHANNEL?j.setOptions({voiceChannelGuildFilter:null},!0):j.setOptions({userFilters:null,voiceChannelGuildFilter:void 0},!0)}F=r;j.search(n,F===s.h8.USER?i:void 0)},QUICKSWITCHER_SELECT:function(t){k=t.selectedIndex},QUICKSWITCHER_SWITCH_TO:function(){if(G)return!1;G=!0;l.Z.set(H,!0)},CHANNEL_SELECT:function(t){var e=t.channelId;if(null==e)return!1;(W=W.filter((function(t){return t!==e}))).unshift(e);W.length>4&&(W.length=4)}});const it=rt},488076:(t,e,n)=>{n.d(e,{Z:()=>T});var r=n(791462),i=n(444450),o=n(173436),l=n(528275),u=n(356004),s=n(653772),a=n(379822),c=n(971738);function f(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return d(t)}function p(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t,e){y=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return y(t,e)}var _=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))
;return!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var C,g,E="selectedChannelGuildFrecency",b=new l.Z({computeBonus:function(){return 100},computeWeight:function(t){var e=0;0===t?e=100:t>=1&&t<2?e=70:t>=2&&t<4?e=50:t>=4&&t<7?e=30:t>=7&&(e=10);return e},lookupKey:function(t){return null!==(g=null!==(C=s.Z.getGuild(t))&&void 0!==C?C:u.Z.getChannel(t))&&void 0!==g?g:u.Z.getChannel(u.Z.getDMFromUserId(t))},afterCompute:function(t){__OVERLAY__||i.Z.set(E,t)},numFrequentlyItems:100,maxSamples:10}),m=null,S=null;function O(t){var e=t.guildId,n=t.channelId;if(n!==m){m=null!=n?n:null;null!=n&&b.track(n)}if(null!=e&&e!==S){S=e;b.track(e)}return!1}function I(){b.markDirty();return!1}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{
constructor:{value:t,writable:!0,configurable:!0}});e&&y(t,e)}(n,t);var e=v(n);function n(){f(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(c.Z,a.Z);var t=i.Z.get(E,null);null!=t&&b.overwriteHistory(t)};r.getFrequently=function(){return b.frequently};r.getScore=function(t){var e;return null!==(e=b.getFrecency(t))&&void 0!==e?e:0};r.getScoreForDM=function(t){var e=u.Z.getDMFromUserId(t);return null!=e?this.getScore(e):0};r.getMaxScore=function(){return 1e3};r.getBonusScore=function(){return 100};r.__getLocalVars=function(){return{SELECTED_USAGE_HISTORY:E,MAX_NUM_SELECTED_ITEMS:100,MAX_SAMPLES:10,SELECTION_BONUS:100,frecency:b,lastSelected:m,lastSelectedGuild:S}};!function(t,e,n){e&&h(t.prototype,e);n&&h(t,n)}(n,[{key:"frecency",get:function(){return b}}]);return n}(r.ZP.Store);R.displayName="FrecencyStore";const T=new R(o.Z,{CONNECTION_OPEN:I,OVERLAY_INITIALIZE:I,VOICE_CHANNEL_SELECT:O,CHANNEL_SELECT:O})},604943:(t,e,n)=>{n.d(e,{Z:()=>m})
;var r=n(791462),i=n(173436),o=n(674981),l=n(800539),u=n(73462),s=n(57203),a=n(742269),c=n(824756),f=n(461061);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return d(t)}function p(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t,e){y=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return y(t,e)}var _,v,C,g=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}()
;return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&y(t,e)}(n,t);var e=E(n);function n(){h(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){a.FB&&c.S();_={};v=new Set;C=[]};r.getState=function(t,e){var n=(0,s.Tu)(t,e);return _[n]};r.isSyncing=function(t,e){var n=(0,s.Tu)(t,e);return v.has(n)};r.__getLocalVars=function(){return{syncStates:_,syncingComboIds:v,lastSeenDiscordApplicationIds:C}};return n}(r.ZP.Store);b.displayName="CloudSyncStore";const m=new b(i.Z,{GAME_CLOUD_SYNC_START:function(t){var e=t.applicationId,n=t.branchId,r=(0,s.Tu)(e,n);v.add(r)},GAME_CLOUD_SYNC_UPDATE:function(t){var e=t.state,n=!0,r=!1,i=void 0;try{
for(var o,l=Object.keys(e)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;_[u]=e[u]}}catch(t){r=!0;i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}},GAME_CLOUD_SYNC_COMPLETE:function(t){var e=t.applicationId,n=t.branchId,r=(0,s.Tu)(e,n);v.delete(r);_[r]={type:f.TzF.DONE,timestamp:Date.now()};return!0},GAME_CLOUD_SYNC_CONFLICT:function(t){var e=t.applicationId,n=t.branchId,r=t.next,i=t.remote,o=(0,s.Tu)(e,n);_[o]={type:f.TzF.CONFLICT,next:r,remote:i};v.delete(o)},GAME_CLOUD_SYNC_ERROR:function(t){var e=t.applicationId,n=t.branchId,r=(0,s.Tu)(e,n);_[r]={type:f.TzF.ERROR};v.delete(r)},RUNNING_GAMES_CHANGE:function(){var t=u.ZP.getRunningDiscordApplicationIds(),e=C.filter((function(e){return!t.includes(e)})),n=!0,r=!1,s=void 0;try{for(var a,c=function(){var t=a.value,e=l.Z.getActiveLibraryApplication(t);if(null==e)return"continue";i.Z.wait((function(){try{o.Z(e.id,e.branchId)}catch(t){}}))},f=e[Symbol.iterator]();!(n=(a=f.next()).done);n=!0)c()}catch(t){
r=!0;s=t}finally{try{n||null==f.return||f.return()}finally{if(r)throw s}}C=t;return!1}})},824756:(t,e,n)=>{n.d(e,{S:()=>g,j:()=>b});var r=n(675860),i=n(173436),o=n(832691),l=n(861967),u=n(631134),s=n(134734),a=n(57203),c=n(742269),f=n(588641),h=n(461061);function d(t,e,n,r,i,o,l){try{var u=t[o](l),s=u.value}catch(t){n(t);return}u.done?e(s):Promise.resolve(s).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function l(t){d(o,r,i,l,u,"next",t)}function u(t){d(o,r,i,l,u,"throw",t)}l(void 0)}))}}var y,_=function(t,e){var n,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),
0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(t,l)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function v(){if(null==y)throw new Error("Initialize cloud sync module before syncing.");return y}function C(){return c.FB&&((0,c.id)()||(0,c.ED)())}function g(){return E.apply(this,arguments)}function E(){return(E=p((function(){var t;return _(this,(function(e){switch(e.label){case 0:if(null!=y)return[2];if(!C()){
new o.Z("CloudSyncUtils").warn("CloudSync is not supported on this platform");return[2]}return[4,f.default.ensureModule("discord_cloudsync")];case 1:e.sent();t=f.default.getCloudSync();(y=new t).on("state",(function(t){return i.Z.dispatch({type:"GAME_CLOUD_SYNC_UPDATE",state:t})}));return[2]}}))}))).apply(this,arguments)}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!s.Z.supportsCloudSync(t,e))return Promise.resolve({type:h.QCD.NONE});var i,o=v(),c=s.Z.getState(t,e);if(null==c)throw new Error("No dispatch state for ".concat(t,":").concat(e));var f=null!==(i=c.storage)&&void 0!==i?i:{},d=(0,a.Tu)(t,e),p=u.default.getToken();if(null==p)throw new Error("Cannot use cloud sync when not authenticated.");var y=null!=c.installPath?(0,l.Z)(c.installPath):null;if(null==y)throw new Error("No install path for ".concat(t,":").concat(e));var _=u.default.getId(),C={forceHash:n,manifestPath:h.SRg.STORAGE_MANIFEST(y,_),roots:null!=f.roots?f.roots:[{
id:h.SRg.ROOT_ID,paths:Object.keys(h.SRg.ROOT_PLATFORMS).map((function(t){return{platform:t,path:h.SRg.ROOT_STORAGE_PATH(y,_)}})),patterns:h.SRg.ROOT_PATTERN}],storage:{baseURL:"".concat(r.Z.getAPIBaseURL()).concat(h.ANM.APPLICATION_STORAGE(t,e)),token:p},replacements:{INSTALLDIR:h.SRg.INSTALL_DIR(y),USERID:_,BRANCHID:e}};return o.sync(d,C)}},905435:(t,e,n)=>{n.r(e);n.d(e,{installApplication:()=>J,performDefaultLibraryApplicationAction:()=>et,playApplication:()=>j,repairApplication:()=>tt,updateApplication:()=>$});var r=n(36347),i=n(785893),o=n(667294),l=n(730381),u=n.n(l),s=n(791462),a=n(600075),c=n(674981),f=n(881548),h=n(367124),d=n(604943),p=n(191940),y=n(487502),_=n(67416),v=n(897576),C=n(932847),g=n(461061),E=n(959797),b=n(184804),m=n.n(b),S=n(380203),O=n.n(S);function I(t,e,n,r,i,o,l){try{var u=t[o](l),s=u.value}catch(t){n(t);return}u.done?e(s):Promise.resolve(s).then(r,i)}function R(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n)
;function l(t){I(o,r,i,l,u,"next",t)}function u(t){I(o,r,i,l,u,"throw",t)}l(void 0)}))}}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function A(t){A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return A(t)}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){N(t,e,n[e])}))}return t}function Z(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t,e){
w=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return w(t,e)}var P=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Z(this,n)}}var U=function(t,e){var n,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,
r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(t,l)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&w(t,e)}(n,t);var e=D(n);function n(){T(this,n);var t
;(t=e.apply(this,arguments)).onClose=function(){t.props.onClose()};t.handlePlay=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.props,i=r.libraryApplication,o=r.analyticsParams;t.onClose();j(i.id,i,{analyticsParams:o,cloudSync:e,cloudSyncForceHash:n})};t.handleChooseDownload=function(){var e=t.props.cloudSyncState;e.type===g.TzF.CONFLICT&&t.handlePlay(!0,e.remote.hash)};t.handleChooseUpload=function(){var e=t.props.cloudSyncState;e.type===g.TzF.CONFLICT&&t.handlePlay(!0,e.next.hash)};return t}var r=n.prototype;r.renderConflictButton=function(t,e,n,r){return(0,i.jsxs)(p.Co,{className:m().conflictButton,innerClassName:m().conflictButtonInner,onClick:r,children:[(0,i.jsx)("div",{className:n}),(0,i.jsxs)("div",{className:m().buttonBody,children:[(0,i.jsx)("div",{className:m().conflictTitle,children:t}),(0,i.jsx)("div",{children:E.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_LAST_MODIFIED}),(0,
i.jsx)("div",{className:m().timestamp,children:u()(e).calendar()})]})]})};r.renderError=function(){var t=this,e=this.props.application;return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)(_.hz,{children:[(0,i.jsx)(y.Z,{justify:y.Z.Justify.CENTER,children:(0,i.jsx)("div",{className:m().errorArt})}),(0,i.jsx)("div",{className:m().description,children:E.Z.Messages.CLOUD_SYNC_MODAL_ERROR_DESCRIPTION.format({applicationName:e.name})})]}),(0,i.jsx)(_.mz,{children:(0,i.jsxs)(y.Z,{justify:y.Z.Justify.BETWEEN,children:[(0,i.jsx)(p.Co,{className:m().linkButton,size:m().linkButtonSize,look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:this.onClose,children:E.Z.Messages.CANCEL}),(0,i.jsxs)(y.Z,{direction:y.Z.Direction.HORIZONTAL,justify:y.Z.Justify.END,children:[(0,i.jsx)(p.Co,{look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:function(){return t.handlePlay()},className:m().retryButton,children:E.Z.Messages.RETRY}),(0,i.jsx)(p.Co,{onClick:function(){return t.handlePlay(!1)},
children:E.Z.Messages.GAME_ACTION_BUTTON_PLAY})]})]})})]})};r.renderConflict=function(){var t=this.props,e=t.application,n=t.cloudSyncState;if(n.type!==g.TzF.CONFLICT)throw new Error("Cannot render conflict for non conflict type");return(0,i.jsxs)(_.hz,{className:O().marginBottom20,children:[(0,i.jsx)("div",{className:m().description,children:E.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_DESCRIPTION.format({applicationName:e.name})}),this.renderConflictButton(E.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_DOWNLOAD,n.remote.timestamp,m().conflictDownloadArt,this.handleChooseDownload),(0,i.jsxs)(y.Z,{className:m().choiceWrapper,align:y.Z.Align.CENTER,children:[(0,i.jsx)("div",{className:m().choiceLine}),(0,i.jsx)("div",{className:m().choiceTitle,children:E.Z.Messages.CLOUD_SYNC_MODAL_OR}),(0,i.jsx)("div",{className:m().choiceLine})]}),this.renderConflictButton(E.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_UPLOAD,n.next.timestamp,m().conflictUploadArt,this.handleChooseUpload)]})}
;r.render=function(){var t=this.props,e=t.cloudSyncState,n=t.transitionState,r=e.type===g.TzF.CONFLICT?E.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_HEADER:E.Z.Messages.CLOUD_SYNC_MODAL_ERROR_HEADER;return(0,i.jsxs)(_.Y0,{transitionState:n,className:m().modal,"aria-label":r,children:[(0,i.jsxs)(_.xB,{separator:!1,children:[(0,i.jsx)(_.ol,{className:m().closeButton,onClick:this.onClose}),(0,i.jsx)(a.vw,{tag:"h2",className:O().marginReset,children:r})]}),e.type===g.TzF.CONFLICT?this.renderConflict():this.renderError()]})};return n}(o.PureComponent),M=s.ZP.connectStores([d.Z,h.Z],(function(t){var e=t.libraryApplication,n=t.branchId;return{cloudSyncState:d.Z.getState(e.id,n),application:h.Z.getGame(e.id)}}))(x);function j(t,e,n){return H.apply(this,arguments)}function H(){return(H=R((function(t,e,n){var r,o,l,u,s,a,d;return U(this,(function(p){switch(p.label){case 0:if(null==(r=h.Z.getGame(t)))return[2];o=n.cloudSync,l=void 0===o||o,u=n.cloudSyncForceHash,s=void 0===u?null:u,a=n.analyticsParams
;if(!l||null==e)return[3,4];d=e.branchId;p.label=1;case 1:p.trys.push([1,3,,4]);return[4,c.Z(e.id,d,s)];case 2:p.sent();return[3,4];case 3:p.sent();(0,v.h7)((function(t){return(0,i.jsx)(M,L({libraryApplication:e,analyticsParams:a,branchId:d},t))}));return[2];case 4:C.default.track(g.rMx.APPLICATION_OPENED,L({application_id:r.id,application_name:r.name,type:g.q5t.LAUNCH,distributor:null!=e?e.getDistributor():null},a));return[2,f.Z.launch(r.id,null==e?void 0:e.branchId)]}}))}))).apply(this,arguments)}var k=n(133840),G=n(286283),q=n(134734),F=n(937689),Q=n(400055),K=n(664252);function B(t,e,n,r,i,o,l){try{var u=t[o](l),s=u.value}catch(t){n(t);return}u.done?e(s):Promise.resolve(s).then(r,i)}function z(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function l(t){B(o,r,i,l,u,"next",t)}function u(t){B(o,r,i,l,u,"throw",t)}l(void 0)}))}}function W(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0
}):t[e]=n;return t}function Y(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}var V=function(t,e){var n,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o
;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(t,l)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function X(t,e,o,l,u){var s=K.Z.getInstallationPath(t.id,e),a=null!=t.eulaId&&!Q.Z.hasAcceptedEULA(t.eulaId);null==s||a?(0,v.ZD)(z((function(){var r,o;return V(this,(function(l){switch(l.label){case 0:return[4,Promise.all([n.e(40532),n.e(65227),n.e(5387),n.e(74696),n.e(55868),n.e(47820),n.e(39052),n.e(6684),n.e(88622),n.e(56943)]).then(n.bind(n,356943))];case 1:r=l.sent(),o=r.default;return[2,function(n){return(0,i.jsx)(o,Y(function(t){
for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){W(t,e,n[e])}))}return t}({},n),{applicationId:t.id,branchId:e,analyticsLocation:u}))}]}}))}))):(0,r.LO)({application:t,branchId:e,buildId:o,manifestIds:l,installationPath:s,analyticsLocation:u})}function J(t,e,n){var r=h.Z.getGame(t);if(null!=r){var i=k.Z.getTargetBuildId(r.id,e),o=k.Z.getTargetManifests(r.id,e);null!=i&&null!=o&&null!=X&&X(r,e,i,o,n)}}function $(t,e){var n=h.Z.getGame(t);if(null!=n)return r.li(n,e,k.Z.getTargetBuildId(n.id,e),k.Z.getTargetManifests(n.id,e))}function tt(t,e,n){var i=h.Z.getGame(t);if(null!=i)return r.cG(i,e,n)}function et(t,e){var n=(0,G.i)(t,q.Z,F.Z),r=e.analyticsParams;switch(n){case g.apO.PLAY:return j(t.id,t,{analyticsParams:r});case g.apO.INSTALL:
return J(t.id,t.branchId,r.source);case g.apO.UPDATE:return $(t.id,t.branchId)}}}}]);
//# sourceMappingURL=16acb9f602ce140c6ac2.js.map
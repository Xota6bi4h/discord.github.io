(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[37886],{545292:(e,n,t)=>{e.exports=t.p+"3294183db720bd0985871f6aa43e6e28.png"},232841:(e,n,t)=>{"use strict";t.d(n,{d3:()=>D,s5:()=>G,VS:()=>V,IP:()=>z,Y1:()=>k,QJ:()=>K,J1:()=>Z,Gn:()=>L,to:()=>P,jA:()=>A,y$:()=>x,PC:()=>R,fe:()=>U,A3:()=>N,kI:()=>j,MZ:()=>Y,DV:()=>w,NJ:()=>J,wC:()=>B,C1:()=>F,_m:()=>X,a2:()=>H});var i=t(667294),r=t(496486),o=t.n(r),l=t(791462),s=t(23816),a=t(182634),u=t(180918),c=t(356004),d=t(392115),E=t(653772),_=t(379822),f=t(784238),m=t(932847),p=t(331478);const I=(0,t(553494).B)({kind:"user",id:"2023-01_emoji_discovery_backfill",label:"Emoji Hotrail Backfill",defaultConfig:{shouldBackfillEmojis:!1},treatments:[{id:1,label:"Backfills Hotrail With Emojis",config:{shouldBackfillEmojis:!0}}]});var T=t(630725),g=t(175453),O=t(461061),h=t(706594),C=t(298716),M=t(959797);function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function b(e,n){
return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],l=!0,s=!1;try{for(t=t.call(e);!(l=(i=t.next()).done);l=!0){o.push(i.value);if(n&&o.length===n)break}}catch(e){s=!0;r=e}finally{try{l||null==t.return||t.return()}finally{if(s)throw r}}return o}}(e,n)||y(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,n){if(e){if("string"==typeof e)return S(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,n):void 0}}var j=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==n?void 0:n.getGuildId();(0,a.O)(t);var r=D(e),s=B(t,e),u=J(t),c=X(t,e),_=c.topEmojis,m=c.newlyAddedEmojis,I=c.backfillEmojis,T=K(_,m,I),O=(0,l.e7)([d.Z],(function(){return d.Z.getDisambiguatedEmojiContext(t)})),h=(0,l.e7)([E.Z],(function(){var e;return null===(e=E.Z.getGuild(t))||void 0===e?void 0:e.name})),C=i.useMemo((function(){var i=f.Z.getFlattenedGuilds(),l=O.getGroupedCustomEmoji(),a=[];o().each(i,(function(i){var r=null==l?void 0:l[i.id];if(!(null==r||0===r.length||null!=n&&r.every((function(t){return p.ZP.isEmojiFiltered(t,n,e)})))){var o={type:g.En.GUILD,guild:i};i.id!==t?a.push(o):a.unshift(o)}}));return d.Z.categories.reduce((function(n,i){
if(i===g.UX.TOP_GUILD_EMOJI){if(0===T.length)return n;n.push({type:g.En.TOP_GUILD_EMOJI,id:i,name:M.Z.Messages.EMOJI_CATEGORY_TOP_GUILD_EMOJI.format({guildName:h})})}else if(i===g.UX.RECENT){if(0===s.length)return n;n.push({type:g.En.RECENT,id:i,name:M.Z.Messages.EMOJI_CATEGORY_RECENT})}else if(i===g.UX.FAVORITES){if(0===u.length)return n;n.push({type:g.En.FAVORITES,id:i,name:M.Z.Messages.CATEGORY_FAVORITE})}else if(i===g.UX.CUSTOM){var o,l=a;r||(l=a.filter((function(e){return e.guild.id===t})));(o=n).push.apply(o,v(l))}else G(e)&&n.push({type:g.En.UNICODE,id:i,name:i});return n}),[])}),[O,n,t,e,T.length,h,s.length,u.length,r]);return C},N=function(e){var n=null!=(null==e?void 0:e.getGuildId());m.default.track(O.rMx.PREMIUM_PROMOTION_OPENED,{location_page:n?O.ZY5.GUILD_CHANNEL:O.ZY5.DM_CHANNEL,location_section:null!=e?O.jXE.EMOJI_PICKER_POPOUT:O.jXE.CUSTOM_STATUS_MODAL})},R=function(e){s.ZP.trackWithMetadata(O.rMx.SEARCH_STARTED,{search_type:O.aib.EMOJI,location:e})},A=function(e,n,t){
s.ZP.trackWithMetadata(O.rMx.SEARCH_RESULT_VIEWED,{search_type:O.aib.EMOJI,total_results:e,num_results_locked:n,location:t})},x=function(e,n){var t,i=null!==(t=e.uniqueName)&&void 0!==t?t:e.name;s.ZP.trackWithMetadata(O.rMx.SEARCH_RESULT_SELECTED,{search_type:O.aib.EMOJI,location:n,expression_guild_id:e.guildId,emoji_id:e.id,emoji_name:i,is_custom:null!=e.id,is_animated:e.animated})},P=function(e){s.ZP.trackWithMetadata(O.rMx.SEARCH_RESULT_EMPTY,{search_type:O.aib.EMOJI,location:e})},L=function(e){var n=e.emoji,t=e.subCategory,i=e.position,r=e.backfillEmoji,o=e.newlyAddedHighlight;s.ZP.trackWithMetadata(O.rMx.EXPRESSION_PICKER_EXPRESSION_FOCUS,{expression_section:null==t?void 0:t.toString(),newly_added_highlight:o,emoji_id:n.id,emoji_name:n.name,emoji_animated:n.animated,emoji_backfilled:r,emoji_position:i})},U=function(e){var n,t,i=e.emoji,r=e.location,o=e.pickerIntention,l=e.category,a=e.subCategory,u=void 0===a?g.t0.NONE:a,c=e.position,d=e.backfillEmoji,E=e.newlyAddedHighlight
;switch(o){case O.HzX.REACTION:n=C.cd.EMOJI_PICKER_REACTION_EMOJI_CLICKED;break;case O.HzX.STATUS:n=C.cd.EMOJI_PICKER_STATUS_EMOJI_CLICKED;break;default:n=C.cd.EMOJI_PICKER_EMOJI_CLICKED}var _=null!==(t=i.uniqueName)&&void 0!==t?t:i.name;s.ZP.trackWithMetadata(O.rMx.EXPRESSION_PICKER_EXPRESSION_SELECTED,{type:n,location:r,expression_id:i.id,expression_name:_,expression_guild_id:i.guildId,is_custom:null!=i.id,is_animated:i.animated,expression_picker_section:l,expression_section:null==u?void 0:u.toString(),emoji_position:c,emoji_backfilled:d,newly_added_highlight:E})},Z=function(e){var n,t=e.emoji,i=e.location,r=null!==(n=t.uniqueName)&&void 0!==n?n:t.name;s.ZP.trackWithMetadata(O.rMx.EXPRESSION_FAVORITED,{location:i,expression_type:h.X1.EMOJI,expression_id:t.id,expression_name:r,expression_guild_id:t.guildId,is_custom:null!=t.id,is_animated:t.animated})},k=function(e,n){switch(e){case g.UX.TOP_GUILD_EMOJI:return M.Z.Messages.EMOJI_CATEGORY_TOP_GUILD_EMOJI.format({guildName:n})
;case g.UX.RECENT:return M.Z.Messages.EMOJI_CATEGORY_RECENT;case g.UX.FAVORITES:return M.Z.Messages.CATEGORY_FAVORITE;case g.UX.ACTIVITY:return M.Z.Messages.EMOJI_CATEGORY_ACTIVITY;case g.UX.FLAGS:return M.Z.Messages.EMOJI_CATEGORY_FLAGS;case g.UX.FOOD:return M.Z.Messages.EMOJI_CATEGORY_FOOD;case g.UX.NATURE:return M.Z.Messages.EMOJI_CATEGORY_NATURE;case g.UX.OBJECTS:return M.Z.Messages.EMOJI_CATEGORY_OBJECTS;case g.UX.PEOPLE:return M.Z.Messages.EMOJI_CATEGORY_PEOPLE;case g.UX.SYMBOLS:return M.Z.Messages.EMOJI_CATEGORY_SYMBOLS;case g.UX.TRAVEL:return M.Z.Messages.EMOJI_CATEGORY_TRAVEL;case g.UX.PREMIUM_UPSELL:return M.Z.Messages.EMOJI_CATEGORY_PREMIUM_UPSELL;default:return null!=n?n:e}},D=function(e){return e!==O.HzX.COMMUNITY_CONTENT&&e!==O.HzX.COMMUNITY_CONTENT_ONLY&&e!==O.HzX.GUILD_STICKER_RELATED_EMOJI&&e!==O.HzX.GUILD_ROLE_BENEFIT_EMOJI&&e!==O.HzX.SOUNDBOARD},G=function(e){return e!==O.HzX.COMMUNITY_CONTENT_ONLY};function w(e,n,t){i.useEffect((function(){u.DZ.loadIfNecessary()
}),[]);return(0,l.e7)([d.Z],(function(){var i=e.replace(/^:/,"").replace(/:$/,"");return""===i?null:d.Z.searchWithoutFetchingLatest(n,i,0,t)}),[n,t,e],l.pF)}function B(e,n){i.useEffect((function(){n!==O.HzX.SOUNDBOARD&&u.DZ.loadIfNecessary()}),[n]);return(0,l.Wu)([d.Z],(function(){return n!==O.HzX.SOUNDBOARD?d.Z.getDisambiguatedEmojiContext(e).getFrequentlyUsedEmojisWithoutFetchingLatest():[]}))}function J(e){i.useEffect((function(){u.DZ.loadIfNecessary()}),[]);return(0,l.Wu)([d.Z],(function(){return d.Z.getDisambiguatedEmojiContext(e).favoriteEmojisWithoutFetchingLatest}))}function F(e,n){i.useEffect((function(){u.DZ.loadIfNecessary()}),[]);return(0,l.e7)([d.Z],(function(){return null!=n&&d.Z.getDisambiguatedEmojiContext(e).isFavoriteEmojiWithoutFetchingLatest(n)}))}function Y(e){i.useEffect((function(){u.DZ.loadIfNecessary()}),[]);return(0,l.Wu)([d.Z],(function(){return d.Z.getDisambiguatedEmojiContext(e).getEmojiInPriorityOrderWithoutFetchingLatest()}))}var W=[];function X(e,n){
var t=b((0,l.Wu)([d.Z],(function(){return[d.Z.getTopEmoji(e),d.Z.getNewlyAddedEmoji(e),d.Z.getBackfillTopEmojis(e)]})),3),i=t[0],r=t[1],o=t[2],s=(0,T.R)(!0),a=s.shouldSeeNewlyAddedEmoji,u=s.shouldSeeTopEmojiBar,c=I.useExperiment({}).shouldBackfillEmojis;return n===O.HzX.REACTION?{topEmojis:W,newlyAddedEmojis:W,backfillEmojis:W}:{topEmojis:u?i:W,newlyAddedEmojis:a?r:W,backfillEmojis:u&&c?o:W}}function H(e){var n=(0,l.Wu)([d.Z],(function(){return d.Z.emojiFrecencyWithoutFetchingLatest.frequently.slice()})),t=(0,l.e7)([d.Z],(function(){return d.Z.emojiFrecencyWithoutFetchingLatest.numFrequentlyItems})),r=(0,l.e7)([c.Z,_.Z],(function(){return c.Z.getChannel(_.Z.getChannelId())})),o=(0,l.Wu)([d.Z],(function(){return null!=r?d.Z.getDisambiguatedEmojiContext(r.getGuildId()).favoriteEmojisWithoutFetchingLatest:[]})),a=n.slice(0,t),u=(0,l.cj)([d.Z],(function(){var e;return null!==(e=d.Z.getDisambiguatedEmojiContext(null==r?void 0:r.getGuildId()).groupedCustomEmojis)&&void 0!==e?e:{}
})),E=i.useMemo((function(){var e=null==r?void 0:r.getGuildId();return null!=e?d.Z.getGuildEmoji(e):[]}),[r]),f=Object.values(u).reduce((function(e,n){return e+=n.length}),0),m=X(null==r?void 0:r.getGuildId(),e),p=m.topEmojis,I=m.newlyAddedEmojis,T=m.backfillEmojis,g=i.useCallback((function(){!function(e){var n=e.containerWidth,t=e.favoriteEmojis,i=e.frequentlyUsedEmoji,r=e.guildEmoji,o=e.emojisTotal,l=e.topEmojis,a=e.newlyAddedEmojis,u=e.backfillEmojis,c=e.pickerIntention;s.ZP.trackWithMetadata(c===O.HzX.REACTION?O.rMx.REACTION_PICKER_OPENED:O.rMx.EXPRESSION_PICKER_OPENED,{width:n,tab:h.X1.EMOJI,badged:!1,num_expressions_favorites:t.length,num_animated_expressions_favorites:t.filter((function(e){return null==e?void 0:e.animated})).length,num_custom_expressions_favorites:t.filter((function(e){return null!=e.guildId})).length,num_standard_expressions_favorites:t.filter((function(e){return null==e.id})).length,num_expressions_frecent:i.length,
num_animated_expressions_frecent:i.filter((function(e){return null==e?void 0:e.animated})).length,num_custom_expressions_frecent:i.filter((function(e){return null!=e.guildId})).length,num_standard_expressions_frecent:i.filter((function(e){return null==e.id})).length,num_current_guild_expressions:r.length,num_custom_expressions_total:o,num_expressions_top_server:l.length,num_animated_expressions_top_server:l.filter((function(e){return e.animated})).length,num_expressions_newly_added:a.length,num_animated_expressions_newly_added:a.filter((function(e){return e.animated})).length,num_expressions_backfilled:u.length,num_animated_expressions_backfilled:u.filter((function(e){return e.animated})).length})}({favoriteEmojis:o,frequentlyUsedEmoji:a,guildEmoji:E,emojisTotal:f,backfillEmojis:T,topEmojis:p,newlyAddedEmojis:I,pickerIntention:e})}),[f,a,E,o,p,I,T,e]);i.useEffect((function(){e===O.HzX.REACTION&&g()}),[]);return{trackOnPickerOpen:g}}function z(e,n,t){if(null==t)return g.t0.NONE
;var i=e.map((function(e){return e.id})),r=n.map((function(e){return e.id}));return i.includes(t)?g.t0.TOP_GUILD_EMOJI:r.includes(t)?g.t0.NEWLY_ADDED_EMOJI:g.t0.NONE}function K(e,n,t){var i,r=e.slice(0,9-n.length);if(r.length+n.length<9){var o,l=t.slice(0,9-e.length-n.length);(o=r).push.apply(o,v(l))}(i=r).push.apply(i,v(n));return r}function V(e){var n=new Set;return e.filter((function(e){if(null==e.uniqueName)return!0;if(!n.has(e.optionallyDiverseSequence)){n.add(e.optionallyDiverseSequence);return!0}}))}},195041:(e,n,t)=>{"use strict";t.d(n,{pj:()=>l,pr:()=>s,Zg:()=>a});var i=t(675860),r=t(173436),o=t(461061);function l(e){r.Z.dispatch({type:"TOP_EMOJIS_FETCH",guildId:e});i.Z.get({url:o.ANM.TOP_EMOJIS_FOR_GUILD(e),oldFormErrors:!0}).then((function(n){return r.Z.dispatch({type:"TOP_EMOJIS_FETCH_SUCCESS",guildId:e,topEmojisMetadata:n.body.items.map((function(e){return{emojiId:e.emoji_id,rank:e.emoji_rank}})).sort((function(e,n){return e.rank-n.rank}))})}),(function(){
return r.Z.dispatch({type:"TOP_EMOJIS_FETCH_FAILURE",guildId:e})}))}function s(e,n){r.Z.dispatch({type:"NEWLY_ADDED_EMOJI_SEEN_UPDATED"});null!=e&&null!=n&&r.Z.dispatch({type:"NEWLY_ADDED_EMOJI_SEEN_PENDING",guildId:e,emojiId:n})}function a(e,n){null!=e&&null!=n&&r.Z.dispatch({type:"NEWLY_ADDED_EMOJI_SEEN_ACKNOWLEDGED",guildId:e,emojiId:n})}},182634:(e,n,t)=>{"use strict";t.d(n,{O:()=>a});var i=t(630725),r=t(392115),o=t(859023),l=t(562717),s=t(195041);function a(e){if(null!=e){if(null!=o.default.getCurrentUser()){if((0,i.Y)().shouldSeeTopEmojiBar){var n=r.Z.getTopEmojisMetadata(e);if(null!=n){var t=n.topEmojisTTL;if(null==t||Date.now()<t)return}l.Z.getIsFetching(e)||(0,s.pj)(e)}}}}},716421:(e,n,t)=>{"use strict";t.d(n,{Z:()=>U});var i=t(785893),r=(t(667294),
t(294184)),o=t.n(r),l=t(791462),s=t(956345),a=t(64833),u=t(232841),c=t(224292),d=t(655695),E=t(832377),_=t(859023),f=t(720897),m=t(426217),p=t(191940),I=t(889373),T=t(757987),g=t(370678),O=t(732031),h=t(897576),C=t(74030),M=t(298716),S=t(461061),b=t(959797),v=t(618469),y=t.n(v);function j(e,n,t,i,r,o,l){try{var s=e[o](l),a=s.value}catch(e){t(e);return}s.done?n(a):Promise.resolve(a).then(i,r)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var o=e.apply(n,t);function l(e){j(o,i,r,l,s,"next",e)}function s(e){j(o,i,r,l,s,"throw",e)}l(void 0)}))}}function R(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))))
;i.forEach((function(n){R(e,n,t[n])}))}return e}function x(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,i)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function P(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++){t=o[i];n.indexOf(t)>=0||(r[t]=e[t])}return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){t=o[i];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}}return r}var L=function(e,n){var t,i,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={
next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;(i=0,r)&&(o=[2&o[0],r.value]);switch(o[0]){case 0:case 1:r=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;i=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(r=l.trys,r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1];r=o;break}if(r&&l.label<r[2]){l.label=r[2];l.ops.push(o);break}r[2]&&l.ops.pop();l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e];i=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const U=function(e){var n=function(e){var n,t
;return(0,i.jsxs)(I.C,x(A({disabled:re,onClick:$,innerClassName:y().premiumSubscribeButton,color:v===M.Si.TIER_1?p.Co.Colors.PRIMARY:p.Co.Colors.GREEN,size:R,wrapperClassName:U,pauseAnimation:!V||W},z,e),{children:[Y&&(0,i.jsx)(O.Z,{className:y().premiumIcon}),(0,i.jsx)("span",{className:o()(y().buttonText,G),children:null!==(t=null!==(n=null==oe?void 0:oe.disabledButtonText)&&void 0!==n?n:D)&&void 0!==t?t:ee})]}))},r=e.isGift,v=e.subscriptionTier,j=e.onClick,R=e.size,U=e.className,Z=e.trialId,k=e.isTrialCTA,D=e.buttonText,G=e.buttonTextClassName,w=e.postSuccessGuild,B=e.onSubscribeModalClose,J=e.premiumModalAnalyticsLocation,F=e.showIcon,Y=void 0===F||F,W=e.disableShine,X=e.applicationId,H=e.giftMessage,z=P(e,["isGift","subscriptionTier","onClick","size","className","trialId","isTrialCTA","buttonText","buttonTextClassName","postSuccessGuild","onSubscribeModalClose","premiumModalAnalyticsLocation","showIcon","disableShine","applicationId","giftMessage"]),K=(0,
l.e7)([_.default],(function(){return _.default.getCurrentUser()})),V=(0,l.e7)([m.Z],(function(){return m.Z.isFocused()})),q=(0,l.e7)([f.Z],(function(){return f.Z.getPremiumTypeSubscription()})),Q=(0,a.Z)().analyticsLocations,$=function(e){e.preventDefault();if(null!=K){null==j||j(e);if((null==q?void 0:q.status)!==S.O0b.ACCOUNT_HOLD)!function(e){var n=e.isClaimed,r=e.isVerified,o=e.isGift,l=e.subscriptionTier,s=e.trialId,a=e.postSuccessGuild,u=e.onSubscribeModalClose,d=e.analyticsLocations,E=e.premiumModalAnalyticsLocation,_=e.applicationId,f=e.giftMessage;if(n)if(r){var m=S.Qqv.BUY;null!=s?m=S.Qqv.TRIAL:o&&(m=S.Qqv.GIFT);(0,c.Z)({isGift:o,initialPlanId:null,subscriptionTier:l,analyticsLocations:d,analyticsObject:A({object:S.qAy.BUTTON_CTA,objectType:m},E),trialId:s,postSuccessGuild:a,onClose:u,applicationId:_,giftMessage:f})}else(0,h.ZD)(N((function(){var e,n;return L(this,(function(r){switch(r.label){case 0:return[4,Promise.all([t.e(40532),t.e(36239)]).then(t.bind(t,36239))];case 1:
e=r.sent(),n=e.default;return[2,function(e){var t=e.onClose,r=P(e,["onClose"]);return(0,i.jsx)(n,x(A({},r),{onClose:t}))}]}}))})));else(0,h.ZD)(N((function(){var e,n;return L(this,(function(r){switch(r.label){case 0:return[4,Promise.all([t.e(40532),t.e(41)]).then(t.bind(t,100041))];case 1:e=r.sent(),n=e.default;return[2,function(e){var t=e.onClose,r=P(e,["onClose"]);return(0,i.jsx)(n,x(A({},r),{onClose:t}))}]}}))})))}({isClaimed:K.isClaimed(),isVerified:K.verified,isGift:r,subscriptionTier:v,trialId:Z,postSuccessGuild:w,onSubscribeModalClose:B,analyticsLocations:Q,premiumModalAnalyticsLocation:J,applicationId:X,giftMessage:H});else{(0,u.A3)();s.Z.open(S.oAB.PREMIUM);null==B||B(!1)}}else(0,d.uL)(S.Z5c.LOGIN)};if(k)return(0,i.jsxs)(p.Co,x(A({size:R,className:U,innerClassName:y().premiumSubscribeButton,look:p.Co.Looks.INVERTED,onClick:$},z),{children:[Y&&(0,i.jsx)(O.Z,{className:y().premiumIcon}),(0,i.jsx)("span",{className:o()(y().buttonText,G),
children:null!=D?D:b.Z.Messages.PREMIUM_TRIAL_CTA_BUTTON_VARIANT})]}));if(r)return(0,i.jsxs)(p.Co,x(A({size:R,className:U,innerClassName:y().giftButton,color:p.Co.Colors.PRIMARY,onClick:$},z),{children:[(0,i.jsx)(g.Z,{className:y().giftIcon}),(0,i.jsx)("span",{className:o()(y().buttonText,G),children:null!=D?D:b.Z.Messages.PREMIUM_GIFTING_BUTTON})]}));var ee=b.Z.Messages.APPLICATION_STORE_GET_PREMIUM,ne=null!=q?(0,C.Af)(q):null,te=null!=ne?C.ZP.getPremiumType(ne.planId):null,ie=v===M.Si.TIER_2&&null!=te&&[M.p9.TIER_0,M.p9.TIER_1].includes(te);ie&&(ee=b.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE);var re=null!=q&&q.status!==S.O0b.ACCOUNT_HOLD&&!(0,E.Q)(q.planId)&&!ie,oe=re?function(e){var n=e.ctaSubscriptionSkuId,t=e.currentPremiumType,i=null,r=null;if(null!=n&&n!==M.Si.LEGACY&&n!==M.Si.TIER_0&&n!==M.Si.TIER_1&&n!==M.Si.TIER_2)return{disabledButtonText:i,disabledButtonTooltipText:r};var o=null!=n?M.y7[n]:null,l=null!=o?M.$e[o]:null,s=null!=t?M.$e[t]:null;if(null!=s&&null!=l&&l<s){
i=b.Z.Messages.APPLICATION_STORE_GET_PREMIUM;r=b.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP}else if(null!=o&&null!=t&&o===t){i=b.Z.Messages.BILLING_SWITCH_PLAN_CURRENT_PLAN;r=b.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP}else null==o&&null!=t&&t===M.p9.TIER_2&&(r=b.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP);return{disabledButtonText:i,disabledButtonTooltipText:r}}({ctaSubscriptionSkuId:v,currentPremiumType:te}):null;return null!=(null==oe?void 0:oe.disabledButtonTooltipText)?(0,i.jsx)(T.ZP,{text:oe.disabledButtonTooltipText,children:n}):n()}},404244:(e,n,t)=>{"use strict";t.d(n,{As:()=>i,dg:()=>O,dz:()=>h,ZP:()=>C});var i,r=t(785893),o=(t(667294),t(294184)),l=t.n(o),s=t(441143),a=t.n(s),u=t(600075),c=t(554434),d=t(294197),E=t(732031),_=t(74030),f=t(511515),m=t(298716),p=t(959797),I=t(716905),T=t.n(I);function g(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t
;return e}!function(e){e[e.EMOJI_CUSTOM=0]="EMOJI_CUSTOM";e[e.STICKERS_IN_HOUSE=1]="STICKERS_IN_HOUSE";e[e.STICKERS_CUSTOM=2]="STICKERS_CUSTOM"}(i||(i={}));function O(e){var n,t,i,o=null===(n=(0,f.N)())||void 0===n?void 0:n.subscription_trial,s=null!==(t=null==o?void 0:o.sku_id)&&void 0!==t?t:m.Si.TIER_2;return(0,r.jsxs)("div",{className:l()(T().gradientUpsellWrapper,(i={},g(i,T().gradientUpsellWrapperTier0,s===m.Si.TIER_0),g(i,T().gradientUpsellWrapperTier2,s===m.Si.TIER_2),g(i,T().gradientUpsellWrapperWithBottomMargin,e.withBottomMargin),i)),children:[(0,r.jsxs)("div",{className:T().logo,children:[(0,r.jsx)(E.Z,{className:T().logoIcon}),s===m.Si.TIER_0&&(0,r.jsx)(d.Z,{className:T().logoWordmark}),s===m.Si.TIER_2&&(0,r.jsx)(c.Z,{className:T().logoWordmark})]}),(0,r.jsx)(u.xv,{variant:"text-md/medium",className:T().copy,color:"none",children:e.children}),(0,r.jsx)(u.xv,{variant:"text-xs/bold",className:T().trialBadge,children:(0,r.jsx)("span",{className:T().trialBadgeInner,children:(0,
_.a5)({intervalType:null==o?void 0:o.interval,intervalCount:null==o?void 0:o.interval_count})})})]})}function h(e){var n,t,i,o=null===(n=(0,f.N)())||void 0===n?void 0:n.subscription_trial,s=null!==(t=null==o?void 0:o.sku_id)&&void 0!==t?t:m.Si.TIER_2;return(0,r.jsx)(u.xv,{variant:"text-xs/bold",className:l()(T().trialBadge,e.className,(i={},g(i,T().trialBadgeGradientTier0,s===m.Si.TIER_0),g(i,T().trialBadgeGradientTier2,s===m.Si.TIER_2),i)),color:"none",children:(0,_.a5)({intervalType:null==o?void 0:o.interval,intervalCount:null==o?void 0:o.interval_count})})}function C(e){switch(e.type){case i.STICKERS_IN_HOUSE:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xv,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",children:p.Z.Messages.STICKER_PICKER_PREMIUM_EMPTY_STATE_TITLE}),(0,r.jsx)(O,{children:p.Z.Messages.PREMIUM_TRIAL_UPSELL_STICKERS_IN_HOUSE})]});case i.STICKERS_CUSTOM:a()(null!=e.children,"You must specify children for this upsell type");return(0,
r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xv,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",children:p.Z.Messages.STICKER_PICKER_PREMIUM_UPSELL_TITLE}),(0,r.jsx)(O,{children:e.children})]});case i.EMOJI_CUSTOM:a()(null!=e.children,"You must specify children for this upsell type");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xv,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",children:p.Z.Messages.PREMIUM_PROMO_TITLE_SEARCH_UPSELL}),(0,r.jsx)(O,{withBottomMargin:!0,children:e.children})]});default:return null}}},237886:(e,n,t)=>{"use strict";t.d(n,{Z:()=>v});var i=t(785893),r=t(667294),o=t(294184),l=t.n(o),s=t(600075),a=t(859169),u=t(64833),c=t(353192),d=t(191940),E=t(82961),_=t(67416),f=t(932847),m=t(511515),p=t(716421),I=t(404244),T=t(298716),g=t(461061),O=t(959797),h=t(745576),C=t.n(h),M=t(545292),S=t.n(M);function b(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e)
;for(i=0;i<o.length;i++){t=o[i];n.indexOf(t)>=0||(r[t]=e[t])}return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){t=o[i];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}}return r}function v(e){var n,t=e.title,o=e.type,h=e.guildBoostProps,M=e.analyticsSource,v=e.analyticsLocation,y=e.body,j=e.context,N=e.glowUp,R=e.artContainerClassName,A=e.transitionState,x=e.onClose,P=e.onSubscribeClick,L=e.onSecondaryClick,U=e.secondaryCTA,Z=e.showNewBadge,k=void 0!==Z&&Z,D=e.enableArtBoxShadow,G=void 0===D||D,w=e.subscriptionTier,B=void 0===w?T.Si.TIER_2:w,J=e.isLoading,F=void 0!==J&&J,Y=b(e,["title","type","guildBoostProps","analyticsSource","analyticsLocation","body","context","glowUp","artContainerClassName","transitionState","onClose","onSubscribeClick","onSecondaryClick","secondaryCTA","showNewBadge","enableArtBoxShadow","subscriptionTier","isLoading"]),W=null!=h,X=(0,
m.N)(),H=(null==X||null===(n=X.subscription_trial)||void 0===n?void 0:n.sku_id)===B&&!W,z=(0,u.Z)(a.Z.PREMIUM_UPSELL_MODAL).analyticsLocations;r.useEffect((function(){F||(W?f.default.track(g.rMx.PREMIUM_GUILD_UPSELL_VIEWED,{type:"".concat(o," - Tier ").concat(h.boostedGuildTier),guild_id:h.guild.id,channel_id:h.channelId,location:v,location_stack:z}):f.default.track(g.rMx.PREMIUM_UPSELL_VIEWED,{type:o,source:M,location_stack:z,sku_id:B}))}),[W,B,F]);var K=G?l()(C().artContainer,C().artContainerBoxShadow,R):l()(C().artContainer,R),V=null;V="artURL"in Y?(0,i.jsx)("img",{className:C().art,alt:"",src:Y.artURL}):Y.artElement;return(0,i.jsxs)(_.Y0,{className:C().root,"aria-label":t,transitionState:A,children:[(0,i.jsxs)("div",{className:K,children:[V,k?(0,i.jsx)("img",{className:C().sparkleBadge,alt:"",src:S()}):null]}),(0,i.jsx)(_.hz,{className:C().content,children:F?(0,i.jsx)(E.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.X6,{className:C().header,variant:"heading-xl/semibold",
children:t}),H?(0,i.jsxs)(i.Fragment,{children:[null!=j&&(0,i.jsx)(s.xv,{className:C().context,variant:"text-md/normal",children:j}),(0,i.jsx)(I.dg,{children:N})]}):(0,i.jsx)(s.xv,{variant:"text-md/normal",children:y})]})}),(0,i.jsxs)(_.mz,{className:C().footer,children:[(0,i.jsxs)("div",{className:C().primaryActions,children:[null!=U?(0,i.jsx)(d.Co,{className:C().secondaryAction,onClick:L,size:d.Co.Sizes.SMALL,color:d.Co.Colors.PRIMARY,look:d.Co.Looks.LINK,children:U}):null,function(){var e;return W?(0,i.jsx)(c.Z,{analyticsLocation:v,guild:h.guild,onClose:x}):(0,i.jsx)(p.Z,{premiumModalAnalyticsLocation:v,subscriptionTier:B,size:d.Co.Sizes.SMALL,color:d.Co.Colors.GREEN,onClick:function(){null==P||P();x()},buttonText:H?(null==X||null===(e=X.subscription_trial)||void 0===e?void 0:e.sku_id)===T.Si.TIER_2?O.Z.Messages.PREMIUM_TRIAL_CTA_BUTTON_VARIANT:O.Z.Messages.PREMIUM_TRIAL_TIER_0_CTA_BUTTON_VARIANT:void 0})}()]}),(0,i.jsx)(d.Co,{onClick:x,size:d.Co.Sizes.SMALL,
color:d.Co.Colors.PRIMARY,look:d.Co.Looks.LINK,children:O.Z.Messages.BACK})]})]})}}}]);
//# sourceMappingURL=ed43bc9d15a5a17f5466.js.map